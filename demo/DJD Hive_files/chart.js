var DJDChart=(function($){"use strict";var showTooltip=function(x,y,contents){$('#tooltip').remove();$('<div id="tooltip">'+contents+'</div>').css({position:'absolute',display:'none',top:y+5,left:x+15,border:'1px solid #333',padding:'4px',color:'#fff',borderRadius:'3px',backgroundColor:'#333',opacity:0.90,zIndex:9999}).appendTo("body").fadeIn(200);},previousPoint=null,tooltip=function($container,unit1,unit2,unit1_before,unit2_before){$container.bind('plothover',function(e,pos,item){var x,y,text;if(item){if(previousPoint!==item.dataIndex){previousPoint=item.dataIndex;x=moment(item.datapoint[0]).format('[W]w GGGG');y=item.datapoint[1];text='<strong>'+item.series.label+' of ';text+=(unit1_before?unit1+' ':'')+x+(!unit1_before&&unit1!==''?' '+unit1:'')+'</strong>: ';text+=(unit2_before?unit2+' ':'')+y+(!unit2_before&&unit2!==''?' '+unit2:'');showTooltip(item.pageX,item.pageY,text);}}else{$('#tooltip').remove();previousPoint=null;}});};return{dashboardJobs:function(container,stats){var $container=$(container);$.plot($container,[{label:"Miles per calendar week",data:stats[1]},{label:"Jobs per calendar week",data:stats[0]}],{grid:{show:true,aboveData:true,color:"#3f3f3f",labelMargin:5,axisMargin:0,borderWidth:0,borderColor:null,minBorderMargin:5,clickable:true,hoverable:true,autoHighlight:true,mouseActiveRadius:20},series:{grow:{active:false,stepMode:"linear",steps:50,stepDelay:true},lines:{show:true,fill:true,lineWidth:3,steps:false},points:{show:true,radius:4,symbol:"circle",fill:true,borderColor:"#fff"}},legend:{position:"ne",margin:[0,-25],noColumns:0,labelBoxBorderColor:null,labelFormatter:function(label){return'&nbsp;'+label+'&nbsp;&nbsp;';}},yaxis:{min:0},xaxes:[{mode:"time",minTickSize:[1,"month"],timeformat:"%b %y"}],crosshair:{mode:"y"},shadowSize:1,colors:['#88bbc8','#ed7a53']});tooltip($container,'','');}};}(jQuery));